<!DOCTYPE html>
<html lang="ml">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UPI QR Share</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
</head>
<body style="background:#faf8e3; font-family:Arial; text-align:center; padding:20px;">
  <h3>‡¥Æ‡¥æ‡¥∏‡¥µ‡¥∞‡¥ø ‡¥Ö‡¥ü‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µÅ‡¥ï</h3>
  <button id="shareBtn" style="background:#673ab7;color:white;border:none;padding:10px 20px;border-radius:10px;">
    üì§ QR ‡¥∑‡µÜ‡¥Ø‡µº ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï
  </button>

  <script>
    const upiId = "9037383927@ybl"; // ‚Üê ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ UPI ID
    const upiURL = `upi://pay?pa=${upiId}&pn=VTSoft&am=200&cu=INR&tn=Monthly+Payment`;

    document.getElementById("shareBtn").addEventListener("click", async () => {
      try {
        // Generate QR Image
        const qrDataUrl = await QRCode.toDataURL(upiURL, { width: 400, margin: 1 });

        // Convert base64 ‚Üí blob
        const response = await fetch(qrDataUrl);
        const blob = await response.blob();
        const file = new File([blob], "upi_qr.png", { type: "image/png" });

        // Share using native share
        if (navigator.canShare && navigator.canShare({ files: [file] })) {
          await navigator.share({
            title: "UPI QR",
            text: "‡¥à QR ‡¥∏‡µç‡¥ï‡¥æ‡µª ‡¥ö‡µÜ‡¥Ø‡µç‡¥§‡µç ‡¥Æ‡¥æ‡¥∏‡¥µ‡¥∞‡¥ø ‡¥Ö‡¥ü‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µÅ‡¥ï",
            files: [file]
          });
        } else {
          alert("Share option ‡¥à browser-‡µΩ support ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡¥ø‡¥≤‡µç‡¥≤ üôè");
        }
      } catch (err) {
        alert("QR share ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥Æ‡µç‡¥™‡µã‡µæ ‡¥™‡¥ø‡¥¥‡¥µ‡µç ‡¥∏‡¥Ç‡¥≠‡¥µ‡¥ø‡¥ö‡µç‡¥ö‡µÅ üòî");
        console.error(err);
      }
    });
  </script>
</body>
</html>